!function(a){"use strict";function p(a,b,c,d){var e,f,g,h,i;return"undefined"==typeof WebViewJavascriptBridge?console.log("未定义WebViewJavascriptBridge"):(e=b||{},f=function(b){console.log("默认成功回调",a,b)},g=function(b){console.log("默认失败回调",a,b)},c&&(f=c),d&&(g=d),h=function(b){var c,d,e,h;if(console.log("统一响应：",b),c=b||{},d=c.code,e=c.result,m.ios)if("0"===d){switch(a){case"common.image.upload":h={url:c.result},e=h;break;case"common.location.get":break;case"common.connection.getNetworkType":h={getNetworkType:c.result},e=h;break;case"common.phone.getUUID":h={uuid:c.result},e=h;break;case"common.phone.getInterface":h={ssid:c.result.SSID,localMac:"",localIpAddress:"",mac:c.result.BSSID,ipAddress:c.result.SSIDDATA},e=h;break;case"app.user.select":h={data:[]},c.result.length>0&&(c.result.forEach(function(a){var b={userId:a.user_id,name:a.name,avatar:"",empno:a.employee_num};h.data=h.data.concat(b)}),e=h);break;case"app.department.select":h={data:[]},c.result.length>0&&(c.result.forEach(function(a){var b={deptId:a.parent_id,deptName:a.name};h.data=h.data.concat(b)}),e=h)}f&&f.call(null,e)}else g&&g.call(null,e,d)},i=!1,m.android?i?(WebViewJavascriptBridge.registerHandler(a,function(a,b){h({code:"0",msg:"成功",result:a}),b&&b({code:"0",msg:"成功"})}),WebViewJavascriptBridge.callHandler(a,e,c)):WebViewJavascriptBridge.callHandler(a,e,c):m.ios&&(i?(WebViewJavascriptBridge.registerHandler(a,function(a,b){h({code:"0",msg:"成功",result:a}),b&&b({code:"0",msg:"成功"})}),WebViewJavascriptBridge.callHandler(a,e)):WebViewJavascriptBridge.callHandler(a,e,h)),void 0)}var g,h,i,j,k,l,m,n,b=["backbutton"],c=["common.navigation.setTitle","common.navigation.setRight","common.navigation.close","common.image.upload","common.image.preview","common.file.upload","common.location.open","common.location.get","common.message.share","common.phone.vibrate","common.connection.getNetworkType","common.phone.getUUID","common.phone.getInterface","app.device.bind","app.user.telephoneCall","app.user.chatOpen","app.user.select","app.department.select","common.notification.showPreloader","common.notification.hidePreloader","common.notification.toast","app.organization.create","app.config.init","app.method.checkJsApis","app.user.get"],d="0.0.1",e=a.navigator.userAgent,f=e.match(/DeliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===f&&(f=e.match(/DeliApp\/([a-zA-Z0-9.-]+)/)),g=f&&f[1],h=!1,i=null,j="app.method.checkJsApis",k=null,l=!1,m={ios:/iPhone|iPad|iPod/i.test(e),android:/Android/i.test(e),version:g,isDeliApp:function(){return this.version},type:function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},config:function(a){a&&(i={serviceId:a.serviceId||-1,timestamp:a.timestamp,noncestr:a.noncestr,sign:a.signature},a.serviceId&&(i.serviceId=a.serviceId))},error:function(a){k=a},ready:function(c){var e=function(a){return a?(null!==i&&i.sign?m.ios?a.callHandler(j,i,function(b){var d=b||{},e=d.code,f=d.msg||"";d.result,"0"===e?c(a):setTimeout(function(){k&&k({code:-1,msg:"权限校验失败 "+f})})}):m.android&&a.callHandler(j,i,function(b){var d=b||{},e=d.code,f=d.msg||"";d.result,"0"===e?c(a):setTimeout(function(){k&&k({code:-1,msg:"权限校验失败 "+f})})}):setTimeout(function(){k&&k({code:-1,msg:"权限校验失败 配置签名对象错误"})}),h===!1&&(h=!0,b.forEach(function(b){m.ios&&a.registerHandler(b,function(a,c){var d=document.createEvent("HTMLEvents");d.data=a,d.initEvent(b),document.dispatchEvent(d),c&&c({code:"0",msg:"成功"})})}),null===i&&{url:encodeURIComponent(window.location.href),js:d}),void 0):console.log("bridge初始化失败")};if(m.ios&&a.WebViewJavascriptBridge){try{WebViewJavascriptBridge.init(function(a,b){console.log("WebViewJavascriptBridge init: ",a,b)})}catch(f){console.log(f.msg)}return e(WebViewJavascriptBridge)}if(m.android&&a.WebViewJavascriptBridge){try{WebViewJavascriptBridge.init(function(a,b){console.log("WebViewJavascriptBridge init: ",a,b)})}catch(f){console.log(f.msg)}return e(WebViewJavascriptBridge)}if(m.ios)console.log("开始监听WebViewJavascriptBridgeReady事件"),document.addEventListener("WebViewJavascriptBridgeReady",function(){if("undefined"==typeof WebViewJavascriptBridge)return console.log("WebViewJavascriptBridgeReady 未定义");try{WebViewJavascriptBridge.init(function(){})}catch(a){console.log(a.msg)}l=!0,e(WebViewJavascriptBridge)},!1);else{if(!m.android)return console.log("很抱歉，尚未支持您所持设备");console.log("开始监听WebViewJavascriptBridgeReady事件"),document.addEventListener("WebViewJavascriptBridgeReady",function(){if("undefined"==typeof WebViewJavascriptBridge)return console.log("WebViewJavascriptBridge 未定义");try{WebViewJavascriptBridge.init(function(){})}catch(a){console.log(a.msg)}l=!0,e(WebViewJavascriptBridge)},!1)}}},n=function(a,b){var e,f,c=a.split("."),d=m;for(e=0,f=c.length;f>e;e++)e===f-1&&(d[c[e]]=b),"undefined"==typeof d[c[e]]&&(d[c[e]]={}),d=d[c[e]]},c.forEach(function(a){n(a,function(b,c,d){p(a,b,c,d)})}),a.deli=m,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=m:"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return m}),console.log("deli",m)}(this);