!function(a){"use strict";function o(a,b,c,d){var e,f,g,h,i,j,k,m;return"undefined"==typeof WebViewJavascriptBridge?console.log("未定义WebViewJavascriptBridge"):(e=b||{},f=function(b){console.log("默认成功回调",a,b)},g=function(b){console.log("默认失败回调",a,b)},c&&(f=c),d&&(g=d),h=function(b){var c,d,e,h;if(console.log("统一响应：",b),c=b||{},d=c.code,e=c.result,"0"===d){switch(a){case"common.image.upload":h={url:c.result},e=h;break;case"common.location.get":break;case"common.connection.getNetworkType":h={getNetworkType:c.result},e=h;break;case"common.phone.getUUID":h={uuid:c.result},e=h;break;case"common.phone.getInterface":h={ssid:c.result.SSID,localMac:"",localIpAddress:"",mac:c.result.BSSID,ipAddress:c.result.SSIDDATA},e=h;break;case"app.user.select":h={data:[]},c.result.length>0&&(c.result.forEach(function(a){var b={userId:a.user_id,name:a.name,avatar:"",empno:a.employee_num};h.data=h.data.concat(b)}),e=h);break;case"app.department.select":h={data:[]},c.result.length>0&&(c.result.forEach(function(a){var b={deptId:a.parent_id,deptName:a.name};h.data=h.data.concat(b)}),e=h);break;default:e=c.result}f&&f.call(null,e)}else g&&g.call(null,e,d)},i=!0,l.android?(j=a.split("."),k=j.pop(),m=j.join("."),WebViewJavascriptBridge(f,g,m,k,e)):l.ios&&(i?(WebViewJavascriptBridge.registerHandler(a,function(a,b){h({code:"0",msg:"成功",result:a}),b&&b({code:"0",msg:"成功"})}),WebViewJavascriptBridge.callHandler(a,e)):WebViewJavascriptBridge.callHandler(a,e,h)),void 0)}var g,h,i,j,k,l,m,b=["backbutton"],c=["common.navigation.setTitle","common.navigation.setRight","common.navigation.close","common.image.upload","common.image.preview","common.file.upload","common.location.open","common.location.get","common.message.share","common.phone.vibrate","common.connection.getNetworkType","common.phone.getUUID","common.phone.getInterface","app.device.bind","app.user.telephoneCall","app.user.chatOpen","app.user.select","app.department.select","common.notification.showPreloader","common.notification.hidePreloader"],d="0.0.1",e=a.navigator.userAgent,f=e.match(/DeliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===f&&(f=e.match(/DeliApp\/([a-zA-Z0-9.-]+)/)),g=f&&f[1],h=!1,i=null,j=null,k=!1,l={ios:/iPhone|iPad|iPod/i.test(e),android:/Android/i.test(e),version:g,isDeliApp:function(){return this.version},type:function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},config:function(a){a&&(i={serviceId:a.serviceId||-1,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:a.jsApiList})},error:function(a){j=a},ready:function(c){var e=function(a){return a?(c(a),h===!1&&(h=!0,b.forEach(function(b){l.ios&&a.registerHandler(b,function(a,c){var d=document.createEvent("HTMLEvents");d.data=a,d.initEvent(b),document.dispatchEvent(d),c&&c({code:"0",msg:"成功"})})}),null===i&&{url:encodeURIComponent(window.location.href),js:d}),void 0):console.log("bridge初始化失败")};if(l.ios&&a.WebViewJavascriptBridge){try{WebViewJavascriptBridge.init(function(a,b){console.log("WebViewJavascriptBridge init: ",a,b)})}catch(f){console.log(f.message)}return e(WebViewJavascriptBridge)}return l.android&&a.WebViewJavascriptBridge?e(WebViewJavascriptBridge):(console.log("开始监听WebViewJavascriptBridgeReady事件"),document.addEventListener("WebViewJavascriptBridgeReady",function(){if("undefined"==typeof WebViewJavascriptBridge)return console.log("WebViewJavascriptBridge 未定义");try{WebViewJavascriptBridge.init(function(){})}catch(a){console.log(a.message)}k=!0,e(WebViewJavascriptBridge)},!1),void 0)}},m=function(a,b){var e,f,c=a.split("."),d=l;for(e=0,f=c.length;f>e;e++)e===f-1&&(d[c[e]]=b),"undefined"==typeof d[c[e]]&&(d[c[e]]={}),d=d[c[e]]},c.forEach(function(a){m(a,function(b,c,d){o(a,b,c,d)})}),a.deli=l,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=l:"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return l}),console.log("deli",l)}(this);